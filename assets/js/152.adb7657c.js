(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{510:function(e,n,t){"use strict";t.r(n);var a=t(13),o=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"主要目的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主要目的"}},[e._v("#")]),e._v(" 主要目的")]),e._v(" "),t("p",[t("strong",[e._v("目的")]),e._v("：Linux下制作WinPE和,Ubuntu16，（CDlinux可选）二合一启动U盘，这样一个U盘可以实现装Windows和Linux双系统，装Linux时也不用刻录")]),e._v(" "),t("h2",{attrs:{id:"准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[e._v("#")]),e._v(" 准备工作")]),e._v(" "),t("ol",[t("li",[t("p",[t("code",[e._v("grub4dos.7Z")]),e._v(" ："),t("a",{attrs:{href:"http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2017-06-25/",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击下载"),t("OutboundLink")],1),e._v("用于写入引导")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("TouchPE.iso")]),e._v(":  WindowsPE镜像，用于重装Windows")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("Ubuntu16.04.iso")]),e._v("： Ubuntu16镜像，用于装Linux")])])]),e._v(" "),t("h2",{attrs:{id:"开始动手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始动手"}},[e._v("#")]),e._v(" 开始动手")]),e._v(" "),t("ol",[t("li",[e._v("将 "),t("code",[e._v("grubdos.7Z")]),e._v(" 解压,文件夹满权限"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo chmod  -R 777 grubdosXXX\n")])])])]),e._v(" "),t("li",[e._v("以"),t("code",[e._v("FAT32")]),e._v("格式化U盘")]),e._v(" "),t("li",[e._v("使用 "),t("code",[e._v("df")]),e._v(" 或 "),t("code",[e._v("fdisk")]),e._v(" 查看U盘，我的U盘为 "),t("code",[e._v("/dev/sdc4")])]),e._v(" "),t("li",[e._v("cd到grub4dos目录，将其安装到U盘"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo ./bootlace.com  --floppy  /dev/sdc4\n")])])])]),e._v(" "),t("li",[e._v("把 "),t("code",[e._v("grub4dos")]),e._v(" 中的 "),t("code",[e._v("grldr")]),e._v(" 和 "),t("code",[e._v("menu.lst")]),e._v(" 复制到 U 盘根目录")]),e._v(" "),t("li",[e._v("把"),t("code",[e._v("ubuntu16.iso")]),e._v("镜像中 "),t("code",[e._v("casper")]),e._v(" 下的 "),t("code",[e._v("vmlinuz.efi")]),e._v(" 和 "),t("code",[e._v("initrd.lz")]),e._v(" 复制到 U 盘根目录或子目录中")]),e._v(" "),t("li",[e._v("把"),t("code",[e._v("TouchPE.iso")]),e._v("复制到 U 盘根目录")]),e._v(" "),t("li",[e._v("编辑 "),t("code",[e._v("menu.lst")]),e._v("文件，制作启动菜单")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("#WindowsPE启动项\ntitle WindowsPE\nfind --set-root --ignore-floppies --ignore-cd /TouchPE.iso\nmap /TouchPE.iso (hd32)\nmap --hook\nchainloader (hd32)\nboot\nsavedefault --wait=2\n\n#CDLinux启动项（可选）\ntitle CDLinux\nfind --set-root --ignore-floppies --ignore-cd /CDlinux/bzImage\nkernel /CDlinux/bzImage CDL_DEV=LABEL=CDLINUX CDL_LANG=zh_CN.UTF-8\ninitrd /CDlinux/initrd\nboot\nsavedefault --wait=2\n\n#Debian启动项，debianboot只是个空文件\ntitle Debian9 Installer\nfind --set-root --ignore-floppies --ignore-cd  /myboot/debian/debianboot\nkernel   /myboot/debian/vmlinuz boot=casper noacpi iso-scan/filename=/myboot/debian/debian9.iso ro quiet splash \ninitrd  /myboot/debian/initrd.gz\nboot\nsavedefault --wait=2\n\n#Ubuntu16启动项\ntitle Ubuntu16\nkernel /vmlinuz.efi boot=casper iso-scan/filename=/ubuntu16.iso locale=zh_CN.UTF-8\ninitrd  /initrd.lz\nboot\nsavedefault --wait=2\n\ntitle reboot \nreboot\n\ntitle halt \nhalt\n  \n")])])]),t("h2",{attrs:{id:"debian启动项注意"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debian启动项注意"}},[e._v("#")]),e._v(" debian启动项注意")]),e._v(" "),t("ol",[t("li",[t("p",[t("code",[e._v("vlinuxz")]),e._v(" 和 "),t("code",[e._v("initrd.gz")]),e._v("文件不能直接从ISO中直接提取，否则找不到光驱，无法进行安装。从下面地址下载：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("http://ftp.nl.debian.org/debian/dists/jessie/main/installer-amd64/current/images/hd-media/\n")])])])]),e._v(" "),t("li",[t("p",[t("code",[e._v("amd64")]),e._v(","),t("code",[e._v("arm64")]),e._v("镜像文件不能下错，一般使用"),t("code",[e._v("amd64")]),e._v("(debian-9.1-amd64-CD.iso)")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("debianboot")]),e._v("只是空文件")])])])])}),[],!1,null,null,null);n.default=o.exports}}]);