(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{599:function(a,e,t){"use strict";t.r(e);var s=t(13),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"zookeeper安装以及使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper安装以及使用"}},[a._v("#")]),a._v(" zookeeper安装以及使用")]),a._v(" "),t("p",[a._v("建议把所有的zookeeper节点放在 datanode 节点上。")]),a._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("p",[a._v("下载解压之后，删除无用的目录和文件，仅仅保留")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("bin\nconf\nlib\nzookeeper-3.4.10.jar\n")])])]),t("p",[a._v("然后进行一下配置")]),a._v(" "),t("ol",[t("li",[a._v("修改配置文件")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mv conf/zoo_simple.cfg  conf/zoo.cfg\n")])])]),t("p",[a._v("修改文件内容， 主要是修改数据缓存目录 "),t("code",[a._v("dataDir")]),a._v("，节点名称")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tickTime=2000\ninitLimit=10\nsyncLimit=5\ndataDir=/root/zkdata\nclientPort=2181\nserver.1=hdpdn0:2888:38888\nserver.2=hdpdn1:2888:38888\nserver.3=hdpdn2:2888:38888\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("每个节点上 "),t("code",[a._v("/root/zkdata")]),a._v(" 内添加文件 "),t("code",[a._v("myid")]),a._v(",内容是 "),t("code",[a._v("1")]),a._v(" ，"),t("code",[a._v("2")]),a._v("，"),t("code",[a._v("3")]),a._v(" 等id")])]),a._v(" "),t("h2",{attrs:{id:"基本使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[a._v("#")]),a._v(" 基本使用")]),a._v(" "),t("ol",[t("li",[a._v("启动/停止/状态")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("bin/zkServer.sh start\nbin/zkServer.sh status\nbin/zkServer.sh stop\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("客户端的使用")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("bin/zkCli.sh\n")])])]),t("p",[a._v("进入交互模式，使用 "),t("code",[a._v("help")]),a._v(" 查看帮助")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ls  /  == 查看\ncreate /aaa 999 == 创建key为 /aaa ,值为999的对象\nget /aaa   == 获取 /aaa 的值\nset /aaa 0000 == 修改/aaa的值\nset -s /aaa/bbb 33 == 会生成 /aaa/bbb0000000 \nset -s /aaa/bbb 46 == 自增生成 /aaa/bbb0000001 \n")])])]),t("p",[a._v("这里值得注意的是，zookeeper 的key键比较特殊，以path "),t("code",[a._v("/aaa/bbb")]),a._v(" 的样式存在，value则是正常的数据，而且多台\nzookeeper 节点通讯是是实时的。用它存储的数据最好不要超过 "),t("code",[a._v("1M")])]),a._v(" "),t("h2",{attrs:{id:"快捷启动小脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快捷启动小脚本"}},[a._v("#")]),a._v(" 快捷启动小脚本")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('#!/bin/bash\n\nfor SERVER in hdpdn0 hdpdn1 hdpdn2\ndo\necho "Starting Server $SERVER....."\nssh $SERVER "source /etc/profile ; /usr/local/zookeeper-3.4.10/bin/zkServer.sh start"\ndone\n\nfor SERVER in hdpdn0 hdpdn1 hdpdn2\ndo\necho "Checking Status $SERVER...."\nssh $SERVER "source /etc/profile ; /usr/local/zookeeper-3.4.10/bin/zkServer.sh status"\ndone\n')])])])])}),[],!1,null,null,null);e.default=r.exports}}]);