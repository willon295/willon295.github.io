(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{563:function(t,e,s){"use strict";s.r(e);var a=s(13),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"lets-encrypt是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lets-encrypt是什么"}},[t._v("#")]),t._v(" Lets-Encrypt是什么")]),t._v(" "),s("p",[t._v("一个推动全民 https 的良心组织。")]),t._v(" "),s("h1",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("ol",[s("li",[t._v("系统 ： "),s("code",[t._v("Centos-7.2 x64")])]),t._v(" "),s("li",[t._v("web服务器; "),s("code",[t._v("Nginx")])])]),t._v(" "),s("h1",{attrs:{id:"开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),s("p",[t._v("官网在 "),s("a",{attrs:{href:"https://certbot.eff.org/lets-encrypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"生成证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成证书"}},[t._v("#")]),t._v(" 生成证书")]),t._v(" "),s("ol",[s("li",[t._v("准备工作")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ yum -y install yum-utils\n$ yum-config-manager --enable rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional\n$ yum install python2-certbot-nginx\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("开始生成，根据提示输入邮箱，域名等")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ certbot --nginx certonly\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("出现一下内容表示成功")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('congratulations ！.....\n...\n\nssl_certificate "/etc/letsencrypt/live/willon.cn/fullchain.pem"; #证书\nssl_certificate_key "/etc/letsencrypt/live/willon.cn/privkey.pem"; #私钥\n...\n')])])]),s("h2",{attrs:{id:"配置证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置证书"}},[t._v("#")]),t._v(" 配置证书")]),t._v(" "),s("ol",[s("li",[t._v("站点配置文件")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ cd /etc/nginx\n$ mkdir vhosts\n$ cd vhosts\n$ vi willon_cn.conf\n")])])]),s("p",[t._v("写入内容:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('    server {\n        listen       443 ssl http2 default_server;\n        listen       [::]:443 ssl http2 default_server;\n        server_name  willon.cn;\n        root         /www/willon_cn;\n        ssl_certificate "/etc/letsencrypt/live/willon.cn/fullchain.pem";\n        ssl_certificate_key "/etc/letsencrypt/live/willon.cn/privkey.pem";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers on;\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n    }\n')])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[t._v("/etc/nginx/nginx.conf")]),t._v("，加载站点配置文件")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("include /etc/nginx/vhosts/*.conf\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("重启nginx")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("systemctl restart nginx\n")])])]),s("h2",{attrs:{id:"自动更新证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动更新证书"}},[t._v("#")]),t._v(" 自动更新证书")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("0 0 1 * 1  certbot renew \n\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);