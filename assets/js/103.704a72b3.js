(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{440:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"master配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#master配置"}},[s._v("#")]),s._v(" master配置")]),s._v(" "),t("ol",[t("li",[s._v("master修改配置文件 "),t("code",[s._v("/etc/my.cnf")])])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nsymbolic-links=0\ncharacter-set-server=utf8\nserver-id=1\nlog-bin=log\nbinlog-do-db=test   #如果不指定， 则默认会备份所有的库\nbinlog-ignore-db=mysql #忽略哪些数据库\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("master授权slave并且刷新权限")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLICATION")]),s._v(" SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FILE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'willon'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.14'")]),s._v(" IDENTIFIED "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nflush    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("重新登陆master ， 查看master 状态")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("MariaDB [(none)]> show  master  status  \\G; \n\n*************************** 1. row ***************************\n            File: log.000002\n        Position: 245\n    Binlog_Do_DB: test\nBinlog_Ignore_DB: mysql\n\n")])])]),t("h1",{attrs:{id:"slave配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#slave配置"}},[s._v("#")]),s._v(" slave配置")]),s._v(" "),t("ol",[t("li",[s._v("slave修改配置文件 "),t("code",[s._v("/etc/my.cnf")])])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nsymbolic-links=0\ncharacter-set-server=utf8\nserver-id=2  #配置server-id\nrelay-log=/var/lib/mysql/relay-bin\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("指定master的备份文件， 以及登陆所需要的信息")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("CHANGE MASTER TO MASTER_HOST='10.0.0.13',MASTER_USER='willon', MASTER_PASSWORD='123456', MASTER_LOG_FILE='log.000001', MASTER_LOG_POS= 245;\nstart slave ; \n")])])]),t("h1",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),t("ol",[t("li",[s._v("在master的test库中新建表")]),s._v(" "),t("li",[s._v("在slave中可以查询到新的表")])])])}),[],!1,null,null,null);a.default=r.exports}}]);