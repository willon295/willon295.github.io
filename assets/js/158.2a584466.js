(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{519:function(s,t,e){"use strict";e.r(t);var a=e(13),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"多站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多站点"}},[s._v("#")]),s._v(" 多站点")]),s._v(" "),e("ol",[e("li",[s._v("更改 "),e("code",[s._v("/etc/nginx/nginx.conf")]),s._v(",加入")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("include /etc/nginx/vhost/*.conf;\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("创建简单站点文件，"),e("code",[s._v("vi vhost/demo_com.conf")])])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("server{\n\n    listen 80;\n    server_name demo.com;\n    location / {\n        root /www/demo_com;\n        index index.html index.htm index.php index.jsp;\n    }\n    \n    error_page 500 502 503 504 /50x.html;\n\n}\n")])])]),e("h2",{attrs:{id:"ssl配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssl配置"}},[s._v("#")]),s._v(" SSL配置")]),s._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[s._v("    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl http2 default_server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       [::]:443 ssl http2 default_server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  willon.cn")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("         /www/demo_com")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#http强制跳转")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("301")]),s._v(" https://"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$server_name")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置证书")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/letsencrypt/live/demo_com/fullchain.pem"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate_key")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/letsencrypt/live/demo_com/privkey.pem"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_session_cache")]),s._v(" shared:SSL:1m")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_session_timeout")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10m")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_ciphers")]),s._v(" HIGH:!aNULL:!MD5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_prefer_server_ciphers")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("on")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);