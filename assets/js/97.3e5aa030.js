(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{432:function(t,_,v){"use strict";v.r(_);var e=v(13),a=Object(e.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h3",{attrs:{id:"一、触发器概述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、触发器概述"}},[t._v("#")]),t._v(" 一、触发器概述")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("什么是触发器？")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("触发器（TRIGGER）与编程语言的函数十分相似，需要声明，执行等。由事件触发，自动执行\n")])])])]),t._v(" "),v("li",[v("p",[t._v("什么时候会执行？")]),t._v(" "),v("p",[t._v("以下语句会执行触发器")]),t._v(" "),v("ul",[v("li",[t._v("DELETE")]),t._v(" "),v("li",[t._v("UPDATE")]),t._v(" "),v("li",[t._v("INSERT")])])])]),t._v(" "),v("h3",{attrs:{id:"二、创建触发器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、创建触发器"}},[t._v("#")]),t._v(" 二、创建触发器")]),t._v(" "),v("p",[t._v("基本语法")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("CREATE TRIGGER trigger_name \n\tBEFORE | AFTER trigger_event\n\t\tON table_name FOR EACH ROW\n\t\t\ttrigger_STMT;\n")])])]),v("p",[t._v("参数说明：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("BEFORE")]),t._v(" "),v("td",[t._v("触发器事件之前，执行触发器语句")])]),t._v(" "),v("tr",[v("td",[t._v("AFTER")]),t._v(" "),v("td",[t._v("触发器事件之后，执行触发器语句")])]),t._v(" "),v("tr",[v("td",[t._v("trigget_event")]),t._v(" "),v("td",[t._v("即DELETE,UPDATE,INSERT")])]),t._v(" "),v("tr",[v("td",[t._v("FOR EACH ROW")]),t._v(" "),v("td",[t._v("任意一条记录满足，即触发该触发器")])]),t._v(" "),v("tr",[v("td",[t._v("trigger_STMT")]),t._v(" "),v("td",[t._v("触发器触发后执行的语句")])])])]),t._v(" "),v("p",[v("br"),v("br")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("单执行句触发器")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("CREATE TRIGGER trigger_name \n\tBEFORE | AFTER trigger_event\n\t\tON table_name FOR EACH ROW\n\t\t\ttrigger_STMT;\n")])])])]),t._v(" "),v("li",[v("p",[t._v("多执行句触发器")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("CREATE TRIGGER trigger_name \n\tBEFORE | AFTER trigger_event\n\t\tON table_name FOR EACH ROW\n\t\tBEGIN\n\t\t\ttrigger_STMT1;\n\t\t\t...\n\t\t\ttrigger_STMTn;\n\t\tEND\n")])])]),v("blockquote",[v("p",[t._v("因为多语句"),v("code",[t._v(";")]),t._v("分号回影响语句结束，所以可以使用")]),t._v(" "),v("p",[v("code",[t._v("DELIMITER $$")]),t._v(" ，先标记"),v("code",[t._v("$$")]),t._v("为语句结束符，在"),v("code",[t._v("END")]),t._v(" 之后再 "),v("code",[t._v("DELIMITER ;")]),t._v("改回")])])])]),t._v(" "),v("p",[v("strong",[t._v("举个栗子")])]),t._v(" "),v("blockquote",[v("p",[t._v("假设存在两个基本表 "),v("code",[t._v("user")]),t._v("和 "),v("code",[t._v("diary")])])]),t._v(" "),v("p",[v("code",[t._v("user")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("id")]),t._v(" "),v("th",[t._v("name")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("1")]),t._v(" "),v("td",[t._v("user1")])]),t._v(" "),v("tr",[v("td",[t._v("2")]),t._v(" "),v("td",[t._v("user2")])]),t._v(" "),v("tr",[v("td",[t._v("3")]),t._v(" "),v("td",[t._v("user3")])])])]),t._v(" "),v("p",[v("code",[t._v("diary")])]),t._v(" "),v("p",[t._v("| dno | dname| dtime|\n| --| --|")]),t._v(" "),v("p",[t._v("功能：当向"),v("code",[t._v("user")]),t._v("表插入一条数据，"),v("code",[t._v("diary")]),t._v("表记录一条日志")]),t._v(" "),v("p",[t._v("实现：")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("CREATE TRIGGER user_diary \nAFTER INSERT\n\tON user FOR EACH ROW\n\t\tINSERT INTO diary VALUES(1,'userdiary',now());\n")])])])])}),[],!1,null,null,null);_.default=a.exports}}]);