(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{587:function(t,a,s){"use strict";s.r(a);var e=s(13),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"搭建前注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建前注意事项"}},[t._v("#")]),t._v(" 搭建前注意事项")]),t._v(" "),s("h2",{attrs:{id:"用户组、用户名与密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户组、用户名与密码"}},[t._v("#")]),t._v(" 用户组、用户名与密码")]),t._v(" "),s("ol",[s("li",[t._v("所有节点最好创建一个名为 "),s("code",[t._v("hadoop-cluster")]),t._v(" 的用户组 ， 该组下创建一个 "),s("code",[t._v("hadoop")]),t._v(" 用户，密码统一如 "),s("code",[t._v("hadooppwd")])]),t._v(" "),s("li",[t._v("这样做的好处：\n"),s("ul",[s("li",[t._v("用户名统一：方便免密登录时统一使用 "),s("code",[t._v("hadoop")]),t._v(" 用户登录")]),t._v(" "),s("li",[t._v("密码统一： 方便后期维护，统一操作")])])])]),t._v(" "),s("h2",{attrs:{id:"系统选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#系统选择"}},[t._v("#")]),t._v(" 系统选择")]),t._v(" "),s("p",[t._v("最好选择  "),s("code",[t._v("centos6.5")]),t._v("或者 "),s("code",[t._v("centos7.X")]),t._v(" ，稳定")]),t._v(" "),s("h2",{attrs:{id:"节点分配"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#节点分配"}},[t._v("#")]),t._v(" 节点分配")]),t._v(" "),s("ol",[s("li",[t._v("namenode ， resoucemanager 用一台")]),t._v(" "),s("li",[t._v("secondarynamenode 一台")]),t._v(" "),s("li",[t._v("datanode 若干台")])]),t._v(" "),s("h2",{attrs:{id:"配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),s("ol",[s("li",[t._v("所有节点的所有配置文件相同")]),t._v(" "),s("li",[s("code",[t._v("slaves")]),t._v(" 文件只写 "),s("code",[t._v("从节点")]),t._v(" 地址")])]),t._v(" "),s("h1",{attrs:{id:"配置免密登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置免密登录"}},[t._v("#")]),t._v(" 配置免密登录")]),t._v(" "),s("p",[t._v("方便服务器集群管理， 配置免密十分必要。")]),t._v(" "),s("ol",[s("li",[t._v("生成 ssh-key\n一般此密钥只在主节点生成，然后分发公钥给其他节点。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ssh-keygen  -t rsa\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("分发公钥脚本编写")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('#! /usr/bin/bash\n\n#所有服务器的地址/域名\nSERVERS="hdp0 hdp1 hdp2";\n\n# 其他服务器的密码\nPASSWORD=hadoop\n\n# 实现输入密码登录\nauto_ssh_copy_id(){\n\texpect -c "set timeout -1;\n\tspawn ssh-copy-id $1;\n\texpect {\n\t\t*yes/no* {send -- yes\\r;exp_continue;}\n\t\t*assword:* {send -- $2\\r;exp_continue;}\n\t\teof {exit 0;}\n\t}";\n}\n# 分发公钥到所有服务器\nssh_copy_id_to_all(){\n\tfor SERVER in $SERVERS\n\tdo\n\t\tauto_ssh_copy_id $SERVER $PASSWORD\n\tdone\n}\n\n# 开始执行\nssh_copy_id_to_all\n')])])]),s("h1",{attrs:{id:"jdk环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdk环境准备"}},[t._v("#")]),t._v(" JDK环境准备")]),t._v(" "),s("ol",[s("li",[t._v("下载 "),s("code",[t._v("jdk8")]),t._v(" 版本的压缩包")]),t._v(" "),s("li",[t._v("解压到 "),s("code",[t._v("/usr/local/lib/jdk8")])]),t._v(" "),s("li",[t._v("配置 "),s("code",[t._v("$JAVA_HOME")]),t._v("环境变量，编辑 "),s("code",[t._v("/etc/profile")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export JAVA_HOME=/usr/local/lib/jdk8\nexport PATH=$JAVA_HOME/bin:$PATH\n")])])]),s("h1",{attrs:{id:"hadoop集群搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hadoop集群搭建"}},[t._v("#")]),t._v(" HADOOP集群搭建")]),t._v(" "),s("h2",{attrs:{id:"基本环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本环境准备"}},[t._v("#")]),t._v(" 基本环境准备")]),t._v(" "),s("p",[t._v("主要配置环境变量")]),t._v(" "),s("ol",[s("li",[t._v("下载 "),s("code",[t._v("Hadoop-XXX-bin.tagr.gz")]),t._v("包，解压到 "),s("code",[t._v("/usr/local/apps/hadoop")])]),t._v(" "),s("li",[t._v("配置 "),s("code",[t._v("$HADOOP_HOME")]),t._v(" 环境变量,编辑 "),s("code",[t._v("/etc/profile")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export HADOOP_HOME=/usr/local/apps/hadoop\nexport PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("配置 HADDOOP 环境变量，编辑 "),s("code",[t._v("$HADOOP_HOME/etc/hadoop/hadoop-env.sh")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('#set hadoop environment\nexport HADOOP_HOME=/usr/local/lib/hadoop3\nexport HADOOP_INSTALL=$HADOOP_HOME\nexport HADOOP_MAPRED_HOME=$HADOOP_HOME\nexport HADOOP_COMMON_HOME=$HADOOP_HOME\nexport HADOOP_HDFS_HOME=$HADOOP_HOME\nexport YARN_HOME=$HADOOP_HOME\nexport HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native\nexport HADOOP_OPTS="-Djava.library.path=${HADOOP_HOME}/lib/native/"\nexport PATH=$PATH:$HADOOP_HOME/sbin:$HADOOP_HOME/bin\n')])])]),s("h2",{attrs:{id:"hdfs集群配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hdfs集群配置"}},[t._v("#")]),t._v(" HDFS集群配置")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("core-site.xml")]),t._v(" ,配置缓存目录，主节点通信地址")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<configuration>\n\t<property>\n\t\t<name>fs.defaultFS</name>\n\t\t\x3c!-- 主节点的 IP 和端口 --\x3e\n\t\t<value>hdfs://hdpnn0:9000</value>\n\t</property>\n\t<property>\n\t\t<name>hadoop.tmp.dir</name>\n\t\t\x3c!-- 缓存目录 --\x3e\n\t\t<value>/root/hadooptmp</value>\n\t</property>\n</configuration>\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[t._v("hdfs-site.xnml")]),t._v(",配置 "),s("code",[t._v("SecondaryNamenode")]),t._v("地址")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<configuration>\n\t\x3c!-- secondaryNamenode节点的 IP 和端口 --\x3e\n\t<property>\n\t\t<name>dfs.namenode.secondary.http-address</name>\n\t\t<value>hdpnn0:50090</value>\n\t</property>\n\t\x3c!--  副本数 --\x3e\n\t<property>\n\t\t<name>dfs.replication</name>\n\t\t<value>3</value>\n\t</property>\n\t\x3c!--  块大小 --\x3e\n\t<property>\n\t\t<name>dfs.blocksize</name>\n\t\t<value>128M</value>\n\t</property>\n\t\x3c!--  Namenode的文件地址 --\x3e\n\t<property>\n\t\t<name>dfs.namenode.name.dir</name>\n\t\t<value>file:////usr/local/lib/hadoop/hdfs/nn</value>\n\t</property>\n\t\x3c!--  SecondaryNamenode的本地文件地址 --\x3e\n\t<property>\n\t\t<name>dfs.namenode.checkpoint.dir</name>\n\t\t<value>file:////usr/local/lib/hadoop/hdfs/snn</value>\n\t</property>\n\t<property>\n\t\t<name>dfs.namenode.checkpoint.edits.dir</name>\n\t\t<value>file:////usr/local/lib/hadoop/hdfs/snn</value>\n\t</property>\n\t\x3c!--  datanode的文件地址 --\x3e\n\t<property>\n\t\t<name>dfs.datanode.data.dir</name>\n\t\t<value>file:////usr/local/lib/hadoop/hdfs/dn</value>\n\t</property>\n</configuration>\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[s("code",[t._v("slaves")]),t._v(" ,配置所有从节点的IP地址")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("hdpdn0\nhdpdn1\n...\nhdpdn2000\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("拷贝当前 "),s("code",[t._v("hadoop")]),t._v(" 文件夹到所有字节点")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SERVERS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hdpdn0 hdpdn1 hdpdn2'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("SERVER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$SERVER")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" /etc/profile  root@"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$SERVER")]),t._v(":/etc\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" /usr/local/apps/hadoop root@"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$SERVER")]),t._v(":/usr/local/\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("格式化 HDFS集群")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("hdfs  namenode -format\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[t._v("启动HDFS")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("start-dfs.sh\n")])])]),s("h2",{attrs:{id:"yarn集群配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yarn集群配置"}},[t._v("#")]),t._v(" YARN集群配置")]),t._v(" "),s("p",[t._v("YARN 集群负责任务调度，作业分发")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("mapred-site.xml")])])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce.framework.name"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[t._v("yarn-site.xml")])])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  resourcemanager主机地址 --\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.resourcemanager.hostname"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hdpnn0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  reduce接收的map数据源 --\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.nodemanager.aux-services"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mapreduce_shuffle"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--  nodemanager的文件缓存目录 --\x3e")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.nodemanager.local-dirs"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("file:///usr/local/lib/hadoop/yarn/nm"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"启动集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动集群"}},[t._v("#")]),t._v(" 启动集群")]),t._v(" "),s("ol",[s("li",[t._v("一键启动")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("start-all.sh\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("手动启动")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("start-dfs.sh\nstart-yarn.sh\n")])])]),s("h1",{attrs:{id:"hbase的搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hbase的搭建"}},[t._v("#")]),t._v(" HBase的搭建")]),t._v(" "),s("p",[t._v("一般HBase会是哟该默认的 "),s("code",[t._v("zookeeper")]),t._v(",此处使用自定义的")]),t._v(" "),s("h2",{attrs:{id:"zookeeper的安装和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper的安装和配置"}},[t._v("#")]),t._v(" Zookeeper的安装和配置")]),t._v(" "),s("ol",[s("li",[t._v("下载解压之后，删除无用目录，保留")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bin\nconf\nlib\nzookeeper-3.4.10.jar\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("拷贝配置文件")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mv conf/zoo_simple.cfg  conf/zoo.cfg\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("修改配置文件")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("tickTime=2000\ninitLimit=10\nsyncLimit=5\ndataDir=/root/zkdata\nclientPort=2181\nserver.1=hdpdn0:2888:38888\nserver.2=hdpdn1:2888:38888\nserver.3=hdpdn2:2888:38888\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("每个节点上 "),s("code",[t._v("/root/zkdata")]),t._v(" 内添加文件 "),s("code",[t._v("myid")]),t._v(" ,内容是 1 ，2，3 等id")]),t._v(" "),s("li",[t._v("快速启动所有节点 "),s("code",[t._v("zookeeper")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('#!/bin/bash\n\nfor SERVER in hdpdn0 hdpdn1 hdpdn2\ndo\necho "Starting Server $SERVER....."\nssh $SERVER "source /etc/profile ; /usr/local/zookeeper-3.4.10/bin/zkServer.sh start"\ndone\n\nfor SERVER in hdpdn0 hdpdn1 hdpdn2\ndo\necho "Checking Status $SERVER...."\nssh $SERVER "source /etc/profile ; /usr/local/zookeeper-3.4.10/bin/zkServer.sh status"\ndone\n')])])]),s("h2",{attrs:{id:"hbase配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hbase配置"}},[t._v("#")]),t._v(" HBase配置")]),t._v(" "),s("h3",{attrs:{id:"hbase-env-sh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hbase-env-sh"}},[t._v("#")]),t._v(" hbase-env.sh")]),t._v(" "),s("p",[t._v("修改 "),s("code",[t._v("JAVA_HOME")]),t._v(",不使用自带的 "),s("code",[t._v("zookeeper")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export JAVA_HOME=/usr/local/jdk-8\nexport HBASE_MANAGES_ZK=false\n")])])]),s("h3",{attrs:{id:"hbase-site-xml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hbase-site-xml"}},[t._v("#")]),t._v(" hbase-site.xml")]),t._v(" "),s("p",[t._v("修改 "),s("code",[t._v("默认的文件的储存路径")]),t._v("，是否使用集群，配置所有的zookeeper的 "),s("code",[t._v("通信地址")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<configuration>\n<property>\n        <name>hbase.rootdir</name>\n        <value>hdfs://hdpnn0:9000/hbasedata</value>\n</property>\n<property>\n        <name>hbase.cluster.distributed</name>\n        <value>true</value>\n</property>\n\n<property>\n        <name>hbase.zookeeper.quorum</name>\n        <value>hdpdn0:2181,hdpdn1:2181,hdpdn2:2181</value>\n</property>\n</configuration>\n")])])]),s("h3",{attrs:{id:"regionservers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#regionservers"}},[t._v("#")]),t._v(" regionservers")]),t._v(" "),s("p",[t._v("修改这个文件的作用是： 让 "),s("code",[t._v("主节点")]),t._v(" 知道 "),s("code",[t._v("和哪些节点通信")]),t._v(".配置IP或者是主机名即可")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("hdpdn0\nhdpdn1\nhdpdn2\n")])])]),s("h3",{attrs:{id:"分发安装包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分发安装包"}},[t._v("#")]),t._v(" 分发安装包")]),t._v(" "),s("p",[t._v("将配置好的 "),s("code",[t._v("hbase 文件夹")]),t._v(" 发送给所有节点")]),t._v(" "),s("h3",{attrs:{id:"启动测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动测试"}},[t._v("#")]),t._v(" 启动测试")]),t._v(" "),s("p",[t._v("注意：在这之前先启动 hadoop")]),t._v(" "),s("ol",[s("li",[t._v("启动Hbase")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bin/start-hbase.sh\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[t._v("jps")]),t._v("查看\n主节点会有")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1187 NameNode\n3642 Jps\n3339 HMaster\n")])])]),s("p",[t._v("从节点会有")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("2801 HRegionServer\n2151 DataNode\n2999 Jps\n1933 QuorumPeerMain\n")])])]),s("h1",{attrs:{id:"搭建结束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建结束"}},[t._v("#")]),t._v(" 搭建结束")])])}),[],!1,null,null,null);a.default=n.exports}}]);