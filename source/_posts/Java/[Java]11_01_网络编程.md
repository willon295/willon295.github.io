---
title: '[Java]11_01_网络编程'
tag: Java
category: Java
date: 2016-05-12 00:11:00
---



# TCP

主要使用两个类  `ServerSocket`  、 `Socket`

1. ServerSocket: 服务器套接字，用于创建服务端

   - 服务端创建时，需要指定监听的端口号

     ```java
     ServerSocket server = new ServerSocket(8888); //创建
     Socket socket = server.accept();  //监听，并且返回的是客户端的套接字对象
     secket.getInputStream(); // 获取客户端发送的信息
     ```

     

2. Socket： 客户端套接字， 用于创建客户端，链接服务端使用 

   - 客户端创建时，需要指定 服务器的地址和端口号

     ```java
     Socket client  = new Socket("localhost",8888);
     client.getOutputStream();  //客户端输出流， 向服务器发送数据使用
     ```

# UDP



主要使用的是两个类  `DatagramSocket` 、 `DatagramPacket` 

- `DatagramSocket` : 用来创建套接字 （客户端，或者服务端）

  - 创建 `服务端` ， 创建时，需要 绑定 `端口` 

    ```java
    DatagramSocket server = new DatagramSocket(8888);
    ```

  - 创建 `客户端` ，不需要任何参数

    ```java
     DatagramSocket client = new DatagramSocket();
    ```

    

- `DatagramPacket` : 数据报包， 用于封装数据，其中包括 发送的IP，端口，数据等等

  - 发送数据，需要绑定 `数据缓冲数组`  ，  `目标IP` ，`目标端口` 

    ```java
    byte[] b =new byte[1024]; //数据缓冲数组
    InetAddress localhost = InetAddress.getByName("localhost"); //服务器IP
    //数据报包 ，指定发送的 数据 ， 服务器地址：端口
    DatagramPacket data = new DatagramPacket(b, b.length, localhost, 8888);
    client.send(data);
    ```

  - 接收数据，需要使用 `数据缓冲数组`

    ```java
    //创建新的数据包， 接受服务器响应
    byte[] res = new byte[1024];
    DatagramPacket resp = new DatagramPacket(res, res.length);
    client.receive(resp); //接收数据包之后，包含发送者的 IP ，端口，数据
    
    
    String s = new String(resp.getData()); //读取数据
    InetAddress address = resp.getAddress();//读取 IP
    int port = resp.getPort();  // 读取 端口
    ```

    