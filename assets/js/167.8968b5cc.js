(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{533:function(e,i,t){"use strict";t.r(i);var n=t(13),r=Object(n.a)({},(function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"webview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webview"}},[e._v("#")]),e._v(" Webview")]),e._v(" "),t("p",[e._v("webview  是安卓自带的一个 加载网页的 组件，拿这个 开发浏览器还是挺麻烦的。主要开发步骤：")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("在xml布局文件中添加一个webview组件，给它一个 ID。")])]),e._v(" "),t("li",[t("p",[e._v("在activity中用 findViewById找到并初始化该组件。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' webview.getSettings.setJavaScriptEnnable(true)\n //支持js\n webview.loadurl("http://www.baidu.com/");\n //加载相应的网页\n webview.setWebViewClient(new  WebViewClient());\n webvie.setWebViewChromeClient(new  WebViewChromeClient());\n //本应用的webview中加载网页，而不会跳转至第三方浏览器加载\n')])])])]),e._v(" "),t("li",[t("p",[e._v("在清单文件中添加网络权限；")])]),e._v(" "),t("li",[t("p",[e._v("Run....你会发现他只会加载“百度”，如果想加载自定义的网页，加个EditText,把url地址换成EditText文本内容就行了。")])]),e._v(" "),t("li",[t("p",[e._v("如果想播放视频，自带的webview播放是特别卡的，所以这个时候要使用硬件加速，在清单文件<application>或者是"),t("code",[e._v("activity")]),e._v('中进行 配置\nandroid:hardwareAccelerated="true"')])]),e._v(" "),t("li",[t("p",[e._v("全屏播放貌似是个 问题，只会让视频窗口单独获得焦点，但是还是原来的比例，并没有横屏然后铺满屏幕。")])])]),e._v(" "),t("h2",{attrs:{id:"android之webviewclient与webchromeclient的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android之webviewclient与webchromeclient的区别"}},[e._v("#")]),e._v(" Android之WebViewClient与WebChromeClient的区别")]),e._v(" "),t("p",[t("code",[e._v("ANDROID")]),e._v("应用开发的时候可能会用到"),t("code",[e._v("WEBVIEW")]),e._v("这个组件，使用过程中可能会接触到"),t("code",[e._v("WEBVIEWCLIENT")]),e._v("与"),t("code",[e._v("WEBCHROMECLIENT")]),e._v("，那么这两个类到底有什么不同呢？WebViewClient主要帮助WebView处理各种通知、请求事件的，比如：")]),e._v(" "),t("ul",[t("li",[e._v("onLoadResource")]),e._v(" "),t("li",[e._v("onPageStart")])]),e._v(" "),t("p",[e._v("WebChromeClient主要辅助WebView处理Javascript的对话框、网站图标、网站title、加载进度等比如")]),e._v(" "),t("ul",[t("li",[e._v("onCloseWindow(关闭WebView)")]),e._v(" "),t("li",[e._v("onCreateWindow()")]),e._v(" "),t("li",[e._v("onJsAlert (WebView上alert无效，需要定制WebChromeClient处理弹出)")])]),e._v(" "),t("p",[e._v("看上去他们有很多不同，实际使用的话，如果你的WebView只是用来处理一些html的页面内容，只用WebViewClient就行了，如果需要更丰富的处理效果，比如JS、进度条等，就要用到WebChromeClient。"),t("br"),e._v("\n更多的时候，你可以这样")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("WebView webView;    \nwebView= (WebView) findViewById(R.id.webview);    \nwebView.setWebChromeClient(new WebChromeClient());    \nwebView.setWebViewClient(new WebViewClient());    \nwebView.getSettings().setJavaScriptEnabled(true);    \nwebView.loadUrl(url);    \n")])])]),t("p",[e._v("这样你的WebView理论上就能有大部分需要实现的特色了"),t("br"),e._v("\n当然，有些更精彩的内容还是需要你自己添加的")]),e._v(" "),t("h3",{attrs:{id:"webviewclient的方法说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webviewclient的方法说明"}},[e._v("#")]),e._v(" WebViewClient的方法说明")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("public boolean shouldOverrideUrlLoading(WebView view, String url) {\nview.loadUrl(url);\nreturn true;\n}\n")])])]),t("p",[e._v("在点击请求的是链接是才会调用，重写此方法返回true表明点击网页里面的链接还是在当前的webview里跳转，不跳到浏览器那边。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("public void onReceivedSslError(WebView view, SslErrorHandler handler, android.net.http.SslError error) {\nhandler.proceed();\n}\n")])])]),t("p",[e._v("重写此方法可以让webview处理https请求。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("public boolean shouldOverrideKeyEvent(WebView view, KeyEvent event) {\nreturn super.shouldOverrideKeyEvent(view, event);\n}\n}\n")])])]),t("p",[e._v("重写此方法才能够处理在浏览器中的按键事件。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('public void onLoadResource(WebView view, String url) {\nif (DEBUG) {\nLog.d(TAG, " onLoadResource ");\n}\nsuper.onLoadResource(view, url);\n}\n')])])]),t("p",[e._v("在加载页面资源时会调用，每一个资源（比如图片）的加载都会调用一次。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('public void onPageStarted(WebView view, String url, Bitmap favicon) {\n// TODO Auto-generated method stub\nif (DEBUG) {\nLog.d(TAG, " onPageStarted ");\n}\nif (url.endsWith(".apk")) {\ndownload(url);//下载处理\n}\nsuper.onPageStarted(view, url, favicon);\n}\n')])])]),t("p",[e._v("在页面加载开始时调用。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('public void onPageFinished(WebView view, String url) {\n// TODO Auto-generated method stub\nif (DEBUG) {\nLog.d(TAG, " onPageFinished ");\n}\nsuper.onPageFinished(view, url);\n}\n')])])]),t("p",[e._v("在页面加载结束时调用。")]),e._v(" "),t("h2",{attrs:{id:"tbs-x5内核"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tbs-x5内核"}},[e._v("#")]),e._v(" TBS-X5内核")]),e._v(" "),t("p",[t("a",{attrs:{href:"http://x5.tencent.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("TBS-X5"),t("OutboundLink")],1),e._v("是一款腾讯的浏览器内核；")]),e._v(" "),t("p",[e._v("安卓自带的webkit有很多不足的地方，比如加载卡顿，html5网页游戏 fps 不稳定，还被曝光有安全漏洞。")]),e._v(" "),t("p",[e._v("听说腾讯的x5内核不错，至少在腾讯app中都是用x5的，X5的使用简单步骤：")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("下载jar包，"),t("a",{attrs:{href:"http://res.imtt.qq.com/TES/tbs_sdk_thirdapp_v2.6.0.1045_36900.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("点这里"),t("OutboundLink")],1),e._v("；然后申请接入账号->根据提示填写应用名称->复制APPkey")])]),e._v(" "),t("li",[t("p",[e._v("把jar包添加到项目")])]),e._v(" "),t("li",[t("p",[e._v("xml配置网络权限，添加<meta andriod: APPSDKey:你的key>")])]),e._v(" "),t("li",[t("p",[e._v("替换webview组件")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(' com.tencent.smtt.sdk.WebView\n android:id="@+id/forum_context"\n android:layout_width="fill_parent"\n android:layout_height="fill_parent"\n android:paddingLeft="5dp"\n android:paddingRight="5dp" \n')])])])])]),e._v(" "),t("p",[e._v("5、修改导入的类为tbs的类")])])}),[],!1,null,null,null);i.default=r.exports}}]);