---
title: '[Mysql]MySQL底层实现'
category: MySQL
tag: MySQL
date; 2016-12-21 -00:00:00
---



# 存储引擎

存储引擎通俗的理解就是： 对数据管理的方式不同的引擎。

## InnoDB

必须包含主键 ，因为主键会作为索引
存储文件时 包含两个文件
- `.frm` : 表定义文件
- `.ibd`:  数据文件


**优点** InnoDB 存储引擎的优点是很好地
- `支持事务` ： 唯一支持事务的存储应请，适用于管理敏感的数据，频繁更新业务数据
- `自动灾难恢复`： 能够自动从灾难中恢复数据


## MyISAM

存储数据时包含 3 个文件
- `.frm`: 表定义文件，存储了表的定义相关数据
- `.myd`: 存储数据
- `.myi`: 存储索引，由于索引文件独立存储，所以它的查询效率会高于无此文件的存储引擎

**优点** ： 查询效率高

## Memory

顾名思义，这是一种基于 `内存`  的存储引擎，所以具有极高的查询效率




# 索引

- 聚簇索引： `叶子节点` 就是 `数据节点` 
- 非聚簇索引： 叶子节点 `仍然是索引节点` ，只是有 `指向对应数据块` 的指针

**数据结构**

目前 MySQL 的索引的数据结构 大部分已经转向 `B+树`， 关于索引的具体存储

**存储索引**

- InnoDB：InnoDB的 `数据文件` 本身就是` 索引文件` ， 使用 `主键` 作为索引，属于聚簇索引
- MyISAM:  可以没有主键，且索引文件独立，索引节点上有指向数据块的指针


# 底层数据存储

`.myd`  或者  `.idb` 文件中 保存数据在物理设备上的地址
- 机械硬盘： 记录 柱面，扇区，磁道
- 固态硬盘： （待完善）

如果使用 机械硬盘 存储数据，那么每次IO需要寻址，磁头移动频繁，主要时间会浪费在
`寻道` 、 磁头机械运动