(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{623:function(e,a,t){"use strict";t.r(a);var r=t(13),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("Eureka 是一个注册服务框架, 与其类似的还有  zookeeper  Consul ,Consul 是取中心化的架构, zookeeper 也是.")]),e._v(" "),t("h1",{attrs:{id:"eureka-server安装出现的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eureka-server安装出现的问题"}},[e._v("#")]),e._v(" Eureka-Server安装出现的问题")]),e._v(" "),t("p",[e._v("因为使用的是最新的版本,所以坑非常多.")]),e._v(" "),t("ol",[t("li",[e._v("能正常访问,但是抛出异常")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n")])])]),t("p",[e._v("解决:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("eureka:\n  instance:\n    hostname: localhost\n  client:\n    register-with-eureka: false #加入者两行配置即可\n    fetch-registry: false\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("能正常访问,但是 读取不了 "),t("code",[e._v("registered-replicas")]),e._v(" ,\t"),t("code",[e._v("unavailable-replicas")]),e._v(" "),t("code",[e._v("available-replicas")]),e._v(" 信息")])]),e._v(" "),t("p",[t("strong",[e._v("解决")]),e._v(":  不用 "),t("code",[e._v("yml")]),e._v(" 文件, 用 "),t("code",[e._v("properties")]),e._v(" 配置就解决了.(玄学!!)")]),e._v(" "),t("h1",{attrs:{id:"eureka-client注册出现的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eureka-client注册出现的问题"}},[e._v("#")]),e._v(" Eureka-client注册出现的问题")]),e._v(" "),t("ol",[t("li",[e._v("从官网下载下来的模板并不能成功启动,")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Caused by: java.lang.ClassNotFoundException: org.springframework.http.ResponseEntity\n")])])]),t("p",[e._v("**解决:**添加 "),t("code",[e._v("web依赖")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("不能注册")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("can't register for any know server\n")])])]),t("p",[e._v("**解决:**把 服务端的端口 改成 "),t("code",[e._v("8761")]),e._v(" 即可.\n3. 如果在同一台机器,客户端貌似不需要指定 eureka-server 的地址就能注册.")]),e._v(" "),t("h1",{attrs:{id:"多个服务注册server出现问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多个服务注册server出现问题"}},[e._v("#")]),e._v(" 多个服务注册Server出现问题")]),e._v(" "),t("p",[e._v("红色警告:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY'RE\n")])])]),t("p",[t("strong",[e._v("解决:")]),e._v(" 给每个服务客户端指定不同的 "),t("code",[e._v("instance.appname")])]),e._v(" "),t("h1",{attrs:{id:"完整的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#完整的配置"}},[e._v("#")]),e._v(" 完整的配置")]),e._v(" "),t("ol",[t("li",[e._v("eureka-server")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("server:\n  port: 8761\neureka:\n  instance:\n    hostname: localhost\n    appname: eureka-server-instance\n  client:\n    register-with-eureka: false\n    fetch-registry: false\n    service-url:\n      defalutZone: http://${eureka.instance.hostname}:${server.port}/eureka/\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("eureka-client")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("server:\n  port: 8888\nspring:\n  application:\n    name: eureka-client\neureka:\n  client:\n    service-url:\n      defaultZone: http://localhost:8761/eureka/\n  instance:\n    appname: eureka-client-instance\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("启动: 在入口处加上注解 "),t("code",[e._v("@EnableEurekaServer")]),e._v(" 或者 "),t("code",[e._v("@EnableEurekaClient")])])]),e._v(" "),t("h1",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),t("ol",[t("li",[e._v("官方的 2.0.3 Eureka Quick Start Demo不靠普")]),e._v(" "),t("li",[e._v("当本地有多个服务需要注册时,不需要指定 server的地址,如果是不同的机器那么客户端就要"),t("code",[e._v("指定server地址")]),e._v(", "),t("code",[e._v("自身实例名称")])])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("server:\n  port: 9999\neureka:\n  client:\n    service-url:\n      defaultZone: http://localhost:8761/eureka/\n  instance:\n    appname: member-service  #Application处显示的名称\n    hostname: member-service-hostName #Stutus 对应Url的真实连接主机名\n    ip-address: 127.0.0.1  # 该实例主机对应的 ip\n    prefer-ip-address: true  # 优先使用ip\nspring:\n  application:\n    name: member-service-appName # Status 处明文显示的名称\n\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);